(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{50995:(e,t,a)=>{Promise.resolve().then(a.bind(a,71053))},71053:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var r=a(95155),l=a(12115),s=a(82352),n=a(41519),i=a(30832),d=a.n(i),o=a(83540),c=a(58995),u=a(79133),x=a(54811),h=a(94517),f=a(24026);function j(){let[e,t]=(0,l.useState)(d()().format("YYYY-MM-DD")),[a,i]=(0,l.useState)([]),[j,v]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{i((await (0,n.GG)((0,n.rJ)(s.db,"asistencia_cuadrillas"))).docs.map(e=>({id:e.id,...e.data()})).filter(t=>t.fecha===e)),v((await (0,n.GG)((0,n.rJ)(s.db,"instalaciones"))).docs.map(e=>({id:e.id,...e.data()})).filter(t=>{var a;return("string"==typeof t.fechaInstalacion?d()(t.fechaInstalacion).format("YYYY-MM-DD"):(null==(a=t.fechaInstalacion)?void 0:a.toDate)?d()(t.fechaInstalacion.toDate()).format("YYYY-MM-DD"):"")===e}))})()},[e]);let g=a.filter(e=>{var t;return(null==(t=e.estado)?void 0:t.toLowerCase())==="asistencia"}),p=g.length,y=g.reduce((e,t)=>{let a=t.zona||"Sin Zona";return e[a]=(e[a]||0)+1,e},{}),w=j.filter(e=>{var t;return(null==(t=e.tipoServicio)?void 0:t.toLowerCase())!=="garantia"}),C=w.length,k=w.filter(e=>{var t;return(null==(t=e.estado)?void 0:t.toLowerCase())==="finalizada"}).length,S=C>0?k/C*100:0,N=p>0?k/p:0,I=a.filter(e=>{var t;return(null==(t=e.estado)?void 0:t.toLowerCase())!=="asistencia"}).reduce((e,t)=>{var a;let r=(null==(a=t.estado)?void 0:a.toLowerCase())||"otro";return e[r]=(e[r]||0)+1,e},{});j.reduce((e,t)=>{var a;let r=(null==(a=t.estado)?void 0:a.toLowerCase())||"otro";return e[r]=(e[r]||0)+1,e},{});let D=w.reduce((e,t)=>{var a;let r=(null==(a=t.estado)?void 0:a.toLowerCase())||"otro";return e[r]=(e[r]||0)+1,e},{}),Y=g.reduce((e,t)=>{let a=t.tipo||"Otro";return e[a]=(e[a]||0)+1,e},{}),R=g.filter(e=>{var t;return null==(t=e.nombre)?void 0:t.toLowerCase().includes("residencial")}),E=g.filter(e=>{var t;return null==(t=e.nombre)?void 0:t.toLowerCase().includes("moto")}),L=g.filter(e=>{var t;return null==(t=e.coordinador)?void 0:t.toLowerCase().includes("redes")}),O=g.filter(e=>{var t;return!(null==(t=e.coordinador)?void 0:t.toLowerCase().includes("redes"))});return(0,r.jsxs)("div",{className:"p-6 space-y-12 dark:bg-slate-900 dark:text-slate-200 min-h-screen",children:[" ",(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-100",children:["Dashboard Visual - ",e]})," ",(0,r.jsx)("input",{type:"date",value:e,onChange:e=>t(e.target.value),className:"border p-2 rounded dark:bg-slate-700 dark:border-slate-600 dark:text-slate-100 dark:[color-scheme:dark]"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[(0,r.jsxs)(b,{title:"Cuadrillas en Campo (Asistieron)",children:[(0,r.jsx)("p",{className:"text-5xl font-extrabold text-center text-blue-600 dark:text-blue-400",children:p})," "]}),(0,r.jsxs)(b,{title:"Efectividad",children:[(0,r.jsxs)("p",{className:"text-5xl font-extrabold text-center text-green-500 dark:text-green-400",children:[S.toFixed(1),"%"]})," ",(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:[" ",k," finalizadas v\xe1lidas de ",C]})]}),(0,r.jsxs)(b,{title:"\xcdndice de Productividad",children:[(0,r.jsx)("p",{className:"text-5xl font-extrabold text-center text-purple-600 dark:text-purple-400",children:N.toFixed(2)})," ",(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:"Finalizadas v\xe1lidas / Cuadrillas asistidas"})," "]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[(0,r.jsx)(b,{title:"Cuadrillas No Asistidas",children:(0,r.jsx)(o.u,{width:"100%",height:250,children:(0,r.jsxs)(c.r,{children:[(0,r.jsx)(u.F,{data:Object.entries(I).map(e=>{let[t,a]=e;return{name:t,value:a}}),dataKey:"value",outerRadius:80,label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a)},children:Object.entries(I).map((e,t)=>(0,r.jsx)(x.f,{fill:m[t%m.length]},"cell-".concat(t)))}),(0,r.jsx)(h.m,{contentStyle:{backgroundColor:"rgba(50, 50, 50, 0.8)",border:"none",borderRadius:"4px"},labelStyle:{color:"#fff"},itemStyle:{color:"#fff"}}),(0,r.jsx)(f.s,{wrapperStyle:{color:"#cbd5e1"}})," "]})})}),(0,r.jsx)(b,{title:"Zonas cubiertas hoy",children:(0,r.jsx)(o.u,{width:"100%",height:250,children:(0,r.jsxs)(c.r,{children:[(0,r.jsx)(u.F,{data:Object.entries(y).map(e=>{let[t,a]=e;return{name:t,value:a}}),dataKey:"value",label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a)},children:Object.entries(y).map((e,t)=>(0,r.jsx)(x.f,{fill:m[(t+1)%m.length]},"cell-".concat(t)))}),(0,r.jsx)(h.m,{contentStyle:{backgroundColor:"rgba(50, 50, 50, 0.8)",border:"none",borderRadius:"4px"},labelStyle:{color:"#fff"},itemStyle:{color:"#fff"}}),(0,r.jsx)(f.s,{wrapperStyle:{color:"#cbd5e1"}})]})})}),(0,r.jsx)(b,{title:"Estado de Instalaciones (sin Garant\xeda)",children:(0,r.jsx)(o.u,{width:"100%",height:250,children:(0,r.jsxs)(c.r,{children:[(0,r.jsx)(u.F,{data:Object.entries(D).map(e=>{let[t,a]=e;return{name:t,value:a}}),dataKey:"value",outerRadius:80,label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a)},children:Object.entries(D).map((e,t)=>(0,r.jsx)(x.f,{fill:m[(t+2)%m.length]},"cell-".concat(t)))}),(0,r.jsx)(h.m,{contentStyle:{backgroundColor:"rgba(50, 50, 50, 0.8)",border:"none",borderRadius:"4px"},labelStyle:{color:"#fff"},itemStyle:{color:"#fff"}}),(0,r.jsx)(f.s,{wrapperStyle:{color:"#cbd5e1"}})]})})}),(0,r.jsx)(b,{title:"Distribuci\xf3n de Tipos de Cuadrillas Asistidas",children:(0,r.jsx)(o.u,{width:"100%",height:250,children:(0,r.jsxs)(c.r,{children:[(0,r.jsx)(u.F,{data:Object.entries(Y).map(e=>{let[t,a]=e;return{name:t,value:a}}),dataKey:"value",outerRadius:80,label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a)},children:Object.entries(Y).map((e,t)=>(0,r.jsx)(x.f,{fill:m[t%m.length]},"cell-".concat(t)))}),(0,r.jsx)(h.m,{}),(0,r.jsx)(f.s,{})]})})}),(0,r.jsx)(b,{title:"Residenciales vs Condominio",children:(0,r.jsx)(o.u,{width:"100%",height:250,children:(0,r.jsxs)(c.r,{children:[(0,r.jsxs)(u.F,{data:[{name:"Residenciales",value:R.length},{name:"Condominio",value:E.length}],dataKey:"value",outerRadius:80,label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a)},children:[(0,r.jsx)(x.f,{fill:"#60a5fa"}),(0,r.jsx)(x.f,{fill:"#f43f5e"})]}),(0,r.jsx)(h.m,{}),(0,r.jsx)(f.s,{})]})})}),(0,r.jsx)(b,{title:"Internas vs Externas",children:(0,r.jsx)(o.u,{width:"100%",height:250,children:(0,r.jsxs)(c.r,{children:[(0,r.jsxs)(u.F,{data:[{name:"Internas",value:L.length},{name:"Externas",value:O.length}],dataKey:"value",outerRadius:80,label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a)},children:[(0,r.jsx)(x.f,{fill:"#10b981"}),(0,r.jsx)(x.f,{fill:"#f59e0b"})]}),(0,r.jsx)(h.m,{}),(0,r.jsx)(f.s,{})]})})})]})]})}function b(e){let{title:t,children:a}=e;return(0,r.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow",children:[" ",(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 text-slate-700 dark:text-slate-200",children:t})," ",a]})}let m=["#6366f1","#10b981","#f43f5e","#f59e0b","#3b82f6","#14b8a6","#8b5cf6","#ec4899"]},82352:(e,t,a)=>{"use strict";let r;a.d(t,{db:()=>o,j:()=>d});var l=a(53185),s=a(34029),n=a(41519),i=a(54191);r=(0,l.Dk)().length?(0,l.Sx)():(0,l.Wp)({apiKey:"AIzaSyCmeWb5IZfDKhvqmcJYGdMQPERRli03IrE",authDomain:"redesmyd-f8616.firebaseapp.com",projectId:"redesmyd-f8616",storageBucket:"redesmyd-f8616.firebasestorage.app",messagingSenderId:"903272640767",appId:"1:903272640767:web:ff802e576eca05765a5cca",measurementId:"G-VQTNSEJHCQ"});let d=(0,s.xI)(r),o=(0,n.aU)(r);(0,i.c7)(r)}},e=>{var t=t=>e(e.s=t);e.O(0,[356,5,315,227,441,684,358],()=>t(50995)),_N_E=e.O()}]);